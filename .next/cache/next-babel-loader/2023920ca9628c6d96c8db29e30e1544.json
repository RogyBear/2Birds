{"ast":null,"code":"import _Symbol$toPrimitive from \"@babel/runtime-corejs2/core-js/symbol/to-primitive\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Object$values from \"@babel/runtime-corejs2/core-js/object/values\";\nvar _jsxFileName = \"C:\\\\Users\\\\roger\\\\OneDrive\\\\Desktop\\\\Dasha_Next\\\\Dasha\\\\pages\\\\store\\\\[id].js\";\nvar __jsx = React.createElement;\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[_Symbol$toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { LanguageContext } from '../../contexts/LanguageContext';\nimport { CartContext } from '../../contexts/CartContext';\nimport ShoppingCartSlider from '../../components/ShoppingCartSlider';\n\nfunction Post(_ref) {\n  var product = _ref.product;\n  var sum = product.price;\n\n  var _useContext = useContext(LanguageContext),\n      language = _useContext.language,\n      currLang = _useContext.currLang;\n\n  var _useContext2 = useContext(CartContext),\n      cart = _useContext2.cart,\n      addItem = _useContext2.addItem;\n\n  var _useState = useState(product.price),\n      price = _useState[0],\n      setPrice = _useState[1];\n\n  var _useState2 = useState({\n    productName: {\n      en: product.en_name,\n      ru: product.ru_name\n    },\n    productParams: {},\n    quantity: 1,\n    productPrice: price,\n    productImage: product.image[0].url\n  }),\n      obj = _useState2[0],\n      setObj = _useState2[1];\n\n  var ru = language.russian.product;\n  var en = language.english.product; // Updates product price based on parameters that are selected\n\n  useEffect(function () {\n    _Object$values(obj.productParams).map(function (value) {\n      sum += Number(value.price);\n      setPrice(sum);\n    });\n\n    setObj(function (prevState) {\n      return _objectSpread({}, prevState, {\n        productPrice: sum\n      });\n    });\n  }, [obj.productParams]); // Updates state by using a copy of the rest of the object except the selected item\n\n  var removeParam = function removeParam(key, params) {\n    var val = params[key],\n        withoutParam = _objectWithoutProperties(params, [key].map(_toPropertyKey));\n\n    setObj(function (prevState) {\n      return _objectSpread({}, prevState, {\n        productParams: withoutParam\n      });\n    });\n  }; // Handles parameters to be pushed to local object\n\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value; // grab both en and ru option and price\n\n    var parsedValues = value.split('-'); // store appropriate one in en or ru or price\n\n    var price = parsedValues[0];\n    var ru = parsedValues[1];\n    var en = parsedValues[2]; // store value in params\n\n    var newInput;\n    newInput = _Object$assign({}, obj.productParams, _defineProperty({}, name, {\n      en: en,\n      ru: ru,\n      price: price\n    }));\n\n    if (value === '0') {\n      removeParam(name, obj.productParams);\n    } else {\n      setObj(function (prevState) {\n        return _objectSpread({}, prevState, {\n          productParams: newInput\n        });\n      });\n    }\n  }; // Quantity Function\n\n\n  var handleQuantity = function handleQuantity(e) {\n    var quantityKey = e.target.value;\n\n    if (quantityKey === 'inc') {\n      setObj(function (prevState) {\n        return _objectSpread({}, prevState, {\n          quantity: obj.quantity + 1\n        });\n      });\n    } else {\n      if (obj.quantity > 1) {\n        setObj(function (prevState) {\n          return _objectSpread({}, prevState, {\n            quantity: obj.quantity - 1\n          });\n        });\n      }\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"product-description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, __jsx(ShoppingCartSlider, {\n    product: product,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"product-description__information\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: \"product-description__information__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, currLang ? \" \".concat(product.ru_name) : \" \".concat(product.en_name), \" - \".concat(obj.productPrice, \" p.\")), __jsx(\"div\", {\n    className: \"product-description__information__description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"product-description__information__description__main-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, __jsx(\"h2\", {\n    className: \"product-description__information__description__main-text__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, currLang ? ru.complekt : en.complekt, \":\"), product.komplekt_description.map(function (e, i) {\n    return __jsx(\"p\", {\n      key: e.id,\n      className: \"product-description__information__description__main-text__attributes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"- \", currLang ? e.russian : e.english);\n  })), __jsx(\"div\", {\n    className: \"product-description__information__description__sub-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, __jsx(\"h2\", {\n    className: \"product-description__information__description__sub-text__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, currLang ? ru.additions : en.additions, \":\"), product.dopolneniye_description.map(function (e, i) {\n    return __jsx(\"p\", {\n      key: e.id,\n      className: \"product-description__information__description__sub-text__attributes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"- \", currLang ? e.russian : e.english);\n  }))), __jsx(\"div\", {\n    className: \"product-description__information__selectors\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, product.product_params.map(function (options, i) {\n    return __jsx(\"select\", {\n      className: \"product-description__information__selection\",\n      name: \"parameter-\".concat(i + 1),\n      key: options.id,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, __jsx(\"option\", {\n      label: currLang ? options.select_name_ru : options.select_name_en,\n      value: '0',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), __jsx(\"option\", {\n      value: \"\".concat(options.price_option_one, \"-\").concat(options.ru_option_one, \"-\").concat(options.en_option_one),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, currLang ? \"\".concat(options.ru_option_one) : \"\".concat(options.en_option_one)), __jsx(\"option\", {\n      value: \"\".concat(options.price_option_two, \"-\").concat(options.ru_option_two, \"-\").concat(options.en_option_two),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, currLang ? \"\".concat(options.ru_option_two) : \"\".concat(options.en_option_two)), __jsx(\"option\", {\n      value: \"\".concat(options.price_option_three, \"-\").concat(options.ru_option_three, \"-\").concat(options.en_option_three),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, currLang ? \"\".concat(options.ru_option_three) : \"\".concat(options.en_option_three)));\n  }), __jsx(\"div\", {\n    className: \"product-description__information__control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"product-description__information__quantity\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    className: \"product-description__information__quantity__decrease\",\n    value: \"dec\",\n    onClick: handleQuantity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"Decrease\"), __jsx(\"p\", {\n    className: \"product-description__information__quantity__number\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, obj.quantity), __jsx(\"button\", {\n    className: \"product-description__information__quantity__increase\",\n    value: \"inc\",\n    onClick: handleQuantity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, \"Increase\")), __jsx(\"button\", {\n    className: \"product-description__information__add-item\",\n    onClick: function onClick() {\n      addItem(obj);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, currLang ? ru.add : en.add)))));\n}\n\nPost.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(context) {\n    var id, res, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            id = context.query.id;\n            _context.next = 3;\n            return axios.get(\"\".concat(process.env.CMSLINKSTORES, \"/\").concat(id));\n\n          case 3:\n            res = _context.sent;\n            data = res.data;\n            return _context.abrupt(\"return\", {\n              product: data\n            });\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default Post;","map":{"version":3,"sources":["C:/Users/roger/OneDrive/Desktop/Dasha_Next/Dasha/pages/store/[id].js"],"names":["React","useState","useEffect","useContext","axios","LanguageContext","CartContext","ShoppingCartSlider","Post","product","sum","price","language","currLang","cart","addItem","setPrice","productName","en","en_name","ru","ru_name","productParams","quantity","productPrice","productImage","image","url","obj","setObj","russian","english","map","value","Number","prevState","removeParam","key","params","val","withoutParam","handleChange","e","target","name","parsedValues","split","newInput","handleQuantity","quantityKey","complekt","komplekt_description","i","id","additions","dopolneniye_description","product_params","options","select_name_ru","select_name_en","price_option_one","ru_option_one","en_option_one","price_option_two","ru_option_two","en_option_two","price_option_three","ru_option_three","en_option_three","add","getInitialProps","context","query","get","process","env","CMSLINKSTORES","res","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { LanguageContext } from '../../contexts/LanguageContext';\r\nimport { CartContext } from '../../contexts/CartContext';\r\nimport ShoppingCartSlider from '../../components/ShoppingCartSlider';\r\n\r\nfunction Post({ product }) {\r\n\tlet sum = product.price;\r\n\tconst { language, currLang } = useContext(LanguageContext);\r\n\tconst { cart, addItem } = useContext(CartContext);\r\n\tconst [ price, setPrice ] = useState(product.price);\r\n\tconst [ obj, setObj ] = useState({\r\n\t\tproductName: {\r\n\t\t\ten: product.en_name,\r\n\t\t\tru: product.ru_name\r\n\t\t},\r\n\t\tproductParams: {},\r\n\t\tquantity: 1,\r\n\t\tproductPrice: price,\r\n\t\tproductImage: product.image[0].url\r\n\t});\r\n\tconst ru = language.russian.product;\r\n\tconst en = language.english.product;\r\n\t// Updates product price based on parameters that are selected\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tObject.values(obj.productParams).map((value) => {\r\n\t\t\t\tsum += Number(value.price);\r\n\t\t\t\tsetPrice(sum);\r\n\t\t\t});\r\n\r\n\t\t\tsetObj((prevState) => ({\r\n\t\t\t\t...prevState,\r\n\t\t\t\tproductPrice: sum\r\n\t\t\t}));\r\n\t\t},\r\n\t\t[ obj.productParams ]\r\n\t);\r\n\r\n\t// Updates state by using a copy of the rest of the object except the selected item\r\n\tconst removeParam = (key, params) => {\r\n\t\tconst { [key]: val, ...withoutParam } = params;\r\n\t\tsetObj((prevState) => ({\r\n\t\t\t...prevState,\r\n\t\t\tproductParams: withoutParam\r\n\t\t}));\r\n\t};\r\n\r\n\t// Handles parameters to be pushed to local object\r\n\tconst handleChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\r\n\t\t// grab both en and ru option and price\r\n\t\tconst parsedValues = value.split('-');\r\n\t\t// store appropriate one in en or ru or price\r\n\r\n\t\tconst price = parsedValues[0];\r\n\t\tconst ru = parsedValues[1];\r\n\t\tconst en = parsedValues[2];\r\n\r\n\t\t// store value in params\r\n\t\tlet newInput;\r\n\r\n\t\tnewInput = Object.assign({}, obj.productParams, { [name]: { en: en, ru: ru, price: price } });\r\n\t\tif (value === '0') {\r\n\t\t\tremoveParam(name, obj.productParams);\r\n\t\t} else {\r\n\t\t\tsetObj((prevState) => ({\r\n\t\t\t\t...prevState,\r\n\t\t\t\tproductParams: newInput\r\n\t\t\t}));\r\n\t\t}\r\n\t};\r\n\r\n\t// Quantity Function\r\n\tconst handleQuantity = (e) => {\r\n\t\tconst quantityKey = e.target.value;\r\n\t\tif (quantityKey === 'inc') {\r\n\t\t\tsetObj((prevState) => ({ ...prevState, quantity: obj.quantity + 1 }));\r\n\t\t} else {\r\n\t\t\tif (obj.quantity > 1) {\r\n\t\t\t\tsetObj((prevState) => ({ ...prevState, quantity: obj.quantity - 1 }));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"product-description\">\r\n\t\t\t{/* Picture Slider */}\r\n\t\t\t<ShoppingCartSlider product={product} />\r\n\r\n\t\t\t<div className=\"product-description__information\">\r\n\t\t\t\t{/* All text information on the [id] page */}\r\n\t\t\t\t<h1 className=\"product-description__information__title\">\r\n\t\t\t\t\t{currLang ? ` ${product.ru_name}` : ` ${product.en_name}`}\r\n\t\t\t\t\t{` - ${obj.productPrice} p.`}\r\n\t\t\t\t</h1>\r\n\t\t\t\t{/* Product Description */}\r\n\t\t\t\t<div className=\"product-description__information__description\">\r\n\t\t\t\t\t<div className=\"product-description__information__description__main-text\">\r\n\t\t\t\t\t\t<h2 className=\"product-description__information__description__main-text__title\">\r\n\t\t\t\t\t\t\t{currLang ? ru.complekt : en.complekt}:\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t{product.komplekt_description.map((e, i) => (\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\tkey={e.id}\r\n\t\t\t\t\t\t\t\tclassName=\"product-description__information__description__main-text__attributes\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t- {currLang ? e.russian : e.english}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"product-description__information__description__sub-text\">\r\n\t\t\t\t\t\t<h2 className=\"product-description__information__description__sub-text__title\">\r\n\t\t\t\t\t\t\t{currLang ? ru.additions : en.additions}:\r\n\t\t\t\t\t\t</h2>\r\n\r\n\t\t\t\t\t\t{product.dopolneniye_description.map((e, i) => (\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\tkey={e.id}\r\n\t\t\t\t\t\t\t\tclassName=\"product-description__information__description__sub-text__attributes\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t- {currLang ? e.russian : e.english}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Parameters + Add to Cart */}\r\n\t\t\t\t<div className=\"product-description__information__selectors\">\r\n\t\t\t\t\t{product.product_params.map((options, i) => (\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"product-description__information__selection\"\r\n\t\t\t\t\t\t\tname={`parameter-${i + 1}`}\r\n\t\t\t\t\t\t\tkey={options.id}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option label={currLang ? options.select_name_ru : options.select_name_en} value={'0'} />\r\n\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\tvalue={`${options.price_option_one}-${options.ru_option_one}-${options.en_option_one}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{currLang ? `${options.ru_option_one}` : `${options.en_option_one}`}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\tvalue={`${options.price_option_two}-${options.ru_option_two}-${options.en_option_two}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{currLang ? `${options.ru_option_two}` : `${options.en_option_two}`}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\tvalue={`${options.price_option_three}-${options.ru_option_three}-${options.en_option_three}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{currLang ? `${options.ru_option_three}` : `${options.en_option_three}`}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t<div className=\"product-description__information__control\">\r\n\t\t\t\t\t\t<div className=\"product-description__information__quantity\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"product-description__information__quantity__decrease\"\r\n\t\t\t\t\t\t\t\tvalue=\"dec\"\r\n\t\t\t\t\t\t\t\tonClick={handleQuantity}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tDecrease\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<p className=\"product-description__information__quantity__number\">{obj.quantity}</p>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"product-description__information__quantity__increase\"\r\n\t\t\t\t\t\t\t\tvalue=\"inc\"\r\n\t\t\t\t\t\t\t\tonClick={handleQuantity}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tIncrease\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"product-description__information__add-item\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\taddItem(obj);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{currLang ? ru.add : en.add}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nPost.getInitialProps = async (context) => {\r\n\tconst { id } = context.query;\r\n\tconst res = await axios.get(`${process.env.CMSLINKSTORES}/${id}`);\r\n\r\n\tconst { data } = res;\r\n\treturn { product: data };\r\n};\r\n\r\nexport default Post;\r\n"]},"metadata":{},"sourceType":"module"}