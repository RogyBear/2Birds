{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"C:\\\\Users\\\\roger\\\\OneDrive\\\\Desktop\\\\Dasha_Next\\\\Dasha\\\\contexts\\\\CartContext.js\";\nvar __jsx = React.createElement;\nimport React, { createContext, useState, useEffect } from 'react';\nimport update from 'immutability-helper';\nimport _ from 'lodash';\nexport var CartContext = createContext();\nexport function CartProvider(props) {\n  var initializeState = [];\n  var initialTotal;\n\n  if (true && sessionStorage.getItem('cart')) {\n    initializeState = JSON.parse(sessionStorage.getItem('cart'));\n  }\n\n  var _useState = useState(false),\n      shipSubmit = _useState[0],\n      setShipSubmit = _useState[1]; // INITALIZE THE CART\n\n\n  var _useState2 = useState(initializeState),\n      cart = _useState2[0],\n      setCart = _useState2[1];\n\n  var checkCart = function checkCart() {\n    return cart;\n  };\n\n  var _useState3 = useState(initialTotal),\n      totalPrice = _useState3[0],\n      setTotalPrice = _useState3[1]; //Session Storage\n\n\n  useEffect(function () {\n    window.sessionStorage.setItem('cart', _JSON$stringify(cart));\n  }, [cart]);\n\n  var checkArr = function checkArr(obj1, obj2) {\n    return _.isEqual(obj1, obj2);\n  }; // DELETE ITEM\n\n\n  var deleteItem = function deleteItem(e) {\n    var currentItem = e.currentTarget.value;\n    var cartCopy = cart;\n    cartCopy.splice(currentItem, 1); //Session Storage State\n\n    window.sessionStorage.setItem('cart', _JSON$stringify(_toConsumableArray(cartCopy)));\n    setCart(_toConsumableArray(cartCopy));\n  }; // QUANTITY DECREASE\n\n\n  var quantityDecrease = function quantityDecrease(e) {\n    var currentItem = e.target.value;\n    var cartCopy = cart;\n    cartCopy[currentItem].quantity = cartCopy[currentItem].quantity - 1; //Session Storage State\n\n    window.sessionStorage.setItem('cart', _JSON$stringify(_toConsumableArray(cartCopy)));\n\n    if (cartCopy[currentItem].quantity === 0) {\n      deleteItem(e);\n    }\n\n    setCart(_toConsumableArray(cartCopy));\n  }; // QUANTITY INCREASE\n\n\n  var quantityIncrease = function quantityIncrease(e) {\n    var currentItem = e.target.value;\n    var cartCopy = cart;\n    cartCopy[currentItem].quantity = cartCopy[currentItem].quantity + 1; //Session Storage State\n\n    window.sessionStorage.setItem('cart', _JSON$stringify(_toConsumableArray(cartCopy)));\n    setCart(_toConsumableArray(cartCopy));\n  }; // ADD ITEM\n  // Change to reflect translation changes\n\n\n  var addItem = function addItem(obj) {\n    var dataCheck = false;\n    var noRepeat = false;\n\n    if (cart.length != 0) {\n      cart.map(function (e, i) {\n        if (e.productName.en === obj.productName.en) {\n          var prevVal = e.productParams;\n          var currentVal = obj.productParams;\n          dataCheck = checkArr(prevVal, currentVal);\n\n          if (dataCheck === true) {\n            var object = e;\n            var cartCopy = cart;\n            var newObj = update(object, {\n              quantity: {\n                $set: object.quantity + obj.quantity\n              }\n            });\n            var newState = update(cartCopy, _defineProperty({}, i, {\n              $set: newObj\n            }));\n            setCart(newState);\n            noRepeat = true;\n          }\n        }\n      });\n    } else {\n      setCart([].concat(_toConsumableArray(cart), [obj]));\n    }\n\n    if (dataCheck === false && noRepeat === false) {\n      setCart([].concat(_toConsumableArray(cart), [obj]));\n    }\n  };\n\n  return __jsx(CartContext.Provider, {\n    value: {\n      cart: cart,\n      setCart: setCart,\n      checkCart: checkCart,\n      addItem: addItem,\n      deleteItem: deleteItem,\n      quantityIncrease: quantityIncrease,\n      quantityDecrease: quantityDecrease,\n      shipSubmit: shipSubmit,\n      setShipSubmit: setShipSubmit,\n      totalPrice: totalPrice,\n      setTotalPrice: setTotalPrice\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, props.children);\n}","map":{"version":3,"sources":["C:/Users/roger/OneDrive/Desktop/Dasha_Next/Dasha/contexts/CartContext.js"],"names":["React","createContext","useState","useEffect","update","_","CartContext","CartProvider","props","initializeState","initialTotal","sessionStorage","getItem","JSON","parse","shipSubmit","setShipSubmit","cart","setCart","checkCart","totalPrice","setTotalPrice","window","setItem","checkArr","obj1","obj2","isEqual","deleteItem","e","currentItem","currentTarget","value","cartCopy","splice","quantityDecrease","target","quantity","quantityIncrease","addItem","obj","dataCheck","noRepeat","length","map","i","productName","en","prevVal","productParams","currentVal","object","newObj","$set","newState","children"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\nimport update from 'immutability-helper';\r\nimport _ from 'lodash';\r\n\r\nexport const CartContext = createContext();\r\n\r\nexport function CartProvider(props) {\r\n\tlet initializeState = [];\r\n\tlet initialTotal;\r\n\tif (typeof window !== 'undefined' && sessionStorage.getItem('cart')) {\r\n\t\tinitializeState = JSON.parse(sessionStorage.getItem('cart'));\r\n\t}\r\n\r\n\tconst [ shipSubmit, setShipSubmit ] = useState(false);\r\n\r\n\t// INITALIZE THE CART\r\n\tconst [ cart, setCart ] = useState(initializeState);\r\n\tconst checkCart = () => {\r\n\t\treturn cart;\r\n\t};\r\n\tconst [ totalPrice, setTotalPrice ] = useState(initialTotal);\r\n\t//Session Storage\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\twindow.sessionStorage.setItem('cart', JSON.stringify(cart));\r\n\t\t\t\r\n\t\t},\r\n\t\t[ cart ]\r\n\t);\r\n\r\n\tconst checkArr = (obj1, obj2) => {\r\n\t\treturn _.isEqual(obj1, obj2);\r\n\t};\r\n\r\n\t// DELETE ITEM\r\n\tconst deleteItem = (e) => {\r\n\t\tlet currentItem = e.currentTarget.value;\r\n\t\tlet cartCopy = cart;\r\n\t\tcartCopy.splice(currentItem, 1);\r\n\r\n\t\t//Session Storage State\r\n\r\n\t\twindow.sessionStorage.setItem('cart', JSON.stringify([ ...cartCopy ]));\r\n\t\tsetCart([ ...cartCopy ]);\r\n\t};\r\n\r\n\t// QUANTITY DECREASE\r\n\tconst quantityDecrease = (e) => {\r\n\t\tlet currentItem = e.target.value;\r\n\t\tlet cartCopy = cart;\r\n\t\tcartCopy[currentItem].quantity = cartCopy[currentItem].quantity - 1;\r\n\r\n\t\t//Session Storage State\r\n\r\n\t\twindow.sessionStorage.setItem('cart', JSON.stringify([ ...cartCopy ]));\r\n\t\tif (cartCopy[currentItem].quantity === 0) {\r\n\t\t\tdeleteItem(e);\r\n\t\t}\r\n\t\tsetCart([ ...cartCopy ]);\r\n\t};\r\n\r\n\t// QUANTITY INCREASE\r\n\tconst quantityIncrease = (e) => {\r\n\t\tlet currentItem = e.target.value;\r\n\t\tlet cartCopy = cart;\r\n\t\tcartCopy[currentItem].quantity = cartCopy[currentItem].quantity + 1;\r\n\r\n\t\t//Session Storage State\r\n\r\n\t\twindow.sessionStorage.setItem('cart', JSON.stringify([ ...cartCopy ]));\r\n\t\tsetCart([ ...cartCopy ]);\r\n\t};\r\n\r\n\t// ADD ITEM\r\n\t// Change to reflect translation changes\r\n\tconst addItem = (obj) => {\r\n\t\tlet dataCheck = false;\r\n\t\tlet noRepeat = false;\r\n\r\n\t\tif (cart.length != 0) {\r\n\t\t\tcart.map((e, i) => {\r\n\t\t\t\tif (e.productName.en === obj.productName.en) {\r\n\t\t\t\t\tconst prevVal = e.productParams;\r\n\t\t\t\t\tconst currentVal = obj.productParams;\r\n\t\t\t\t\tdataCheck = checkArr(prevVal, currentVal);\r\n\t\t\t\t\tif (dataCheck === true) {\r\n\t\t\t\t\t\tconst object = e;\r\n\t\t\t\t\t\tconst cartCopy = cart;\r\n\t\t\t\t\t\tconst newObj = update(object, { quantity: { $set: object.quantity + obj.quantity } });\r\n\t\t\t\t\t\tconst newState = update(cartCopy, { [i]: { $set: newObj } });\r\n\t\t\t\t\t\tsetCart(newState);\r\n\t\t\t\t\t\tnoRepeat = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsetCart([ ...cart, obj ]);\r\n\t\t}\r\n\t\tif (dataCheck === false && noRepeat === false) {\r\n\t\t\tsetCart([ ...cart, obj ]);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<CartContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tcart,\r\n\t\t\t\tsetCart,\r\n\t\t\t\tcheckCart,\r\n\t\t\t\taddItem,\r\n\t\t\t\tdeleteItem,\r\n\t\t\t\tquantityIncrease,\r\n\t\t\t\tquantityDecrease,\r\n\t\t\t\tshipSubmit,\r\n\t\t\t\tsetShipSubmit,\r\n\t\t\t\ttotalPrice,\r\n\t\t\t\tsetTotalPrice\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{props.children}\r\n\t\t</CartContext.Provider>\r\n\t);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}