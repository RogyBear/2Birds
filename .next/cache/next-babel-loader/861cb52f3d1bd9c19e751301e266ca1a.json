{"ast":null,"code":"import _Symbol$toPrimitive from \"@babel/runtime-corejs2/core-js/symbol/to-primitive\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Object$values from \"@babel/runtime-corejs2/core-js/object/values\";\nvar _jsxFileName = \"C:\\\\Users\\\\roger\\\\OneDrive\\\\Desktop\\\\Dasha_Next\\\\Dasha\\\\pages\\\\store\\\\[id].js\";\nvar __jsx = React.createElement;\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[_Symbol$toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { LanguageContext } from '../../contexts/LanguageContext';\nimport { CartContext } from '../../contexts/CartContext';\nimport ShoppingCartSlider from '../../components/ShoppingCartSlider';\n\nfunction Post({\n  product\n}) {\n  let sum = product.price;\n  const {\n    language,\n    currLang\n  } = useContext(LanguageContext);\n  const {\n    cart,\n    addItem\n  } = useContext(CartContext);\n  const {\n    0: price,\n    1: setPrice\n  } = useState(product.price);\n  const {\n    0: obj,\n    1: setObj\n  } = useState({\n    productName: {\n      en: product.en_name,\n      ru: product.ru_name\n    },\n    productParams: {},\n    quantity: 1,\n    productPrice: price,\n    productImage: product.image[0].url\n  });\n  const ru = language.russian.product;\n  const en = language.english.product; // Updates product price based on parameters that are selected\n\n  useEffect(() => {\n    _Object$values(obj.productParams).map(value => {\n      sum += Number(value.price);\n      setPrice(sum);\n    });\n\n    setObj(prevState => _objectSpread({}, prevState, {\n      productPrice: sum\n    }));\n  }, [obj.productParams]); // Updates state by using a copy of the rest of the object except the selected item\n\n  const removeParam = (key, params) => {\n    const {\n      [key]: val\n    } = params,\n          withoutParam = _objectWithoutProperties(params, [key].map(_toPropertyKey));\n\n    setObj(prevState => _objectSpread({}, prevState, {\n      productParams: withoutParam\n    }));\n  }; // Handles parameters to be pushed to local object\n\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target; // grab both en and ru option and price\n\n    const parsedValues = value.split('-'); // store appropriate one in en or ru or price\n\n    const price = parsedValues[0];\n    const ru = parsedValues[1];\n    const en = parsedValues[2]; // store value in params\n\n    let newInput;\n    newInput = _Object$assign({}, obj.productParams, {\n      [name]: {\n        en: en,\n        ru: ru,\n        price: price\n      }\n    });\n\n    if (value === '0') {\n      removeParam(name, obj.productParams);\n    } else {\n      setObj(prevState => _objectSpread({}, prevState, {\n        productParams: newInput\n      }));\n    }\n  }; // Quantity Function\n\n\n  const handleQuantity = e => {\n    const quantityKey = e.target.value;\n\n    if (quantityKey === 'inc') {\n      setObj(prevState => _objectSpread({}, prevState, {\n        quantity: obj.quantity + 1\n      }));\n    } else {\n      if (obj.quantity > 1) {\n        setObj(prevState => _objectSpread({}, prevState, {\n          quantity: obj.quantity - 1\n        }));\n      }\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"product-description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, __jsx(ShoppingCartSlider, {\n    product: product,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"product-description__information\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: \"product-description__information__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, currLang ? ` ${product.ru_name}` : ` ${product.en_name}`, ` - ${obj.productPrice} p.`), __jsx(\"div\", {\n    className: \"product-description__information__description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"product-description__information__description__main-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, __jsx(\"h2\", {\n    className: \"product-description__information__description__main-text__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, currLang ? ru.complekt : en.complekt, \":\"), product.komplekt_description.map((e, i) => __jsx(\"p\", {\n    key: e.id,\n    className: \"product-description__information__description__main-text__attributes\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"- \", currLang ? e.russian : e.english))), __jsx(\"div\", {\n    className: \"product-description__information__description__sub-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, __jsx(\"h2\", {\n    className: \"product-description__information__description__sub-text__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, currLang ? ru.additions : en.additions, \":\"), product.dopolneniye_description.map((e, i) => __jsx(\"p\", {\n    key: e.id,\n    className: \"product-description__information__description__sub-text__attributes\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"- \", currLang ? e.russian : e.english)))), __jsx(\"div\", {\n    className: \"product-description__information__selectors\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, product.product_params.map((options, i) => __jsx(\"select\", {\n    className: \"product-description__information__selection\",\n    name: `parameter-${i + 1}`,\n    key: options.id,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, __jsx(\"option\", {\n    label: options.select_name,\n    value: '0',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }), __jsx(\"option\", {\n    value: `${options.price_option_one}-${options.ru_option_one}-${options.en_option_one}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, currLang ? `${options.ru_option_one}` : `${options.en_option_one}`), __jsx(\"option\", {\n    value: `${options.price_option_two}-${options.ru_option_two}-${options.en_option_two}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, currLang ? `${options.ru_option_two}` : `${options.en_option_two}`), __jsx(\"option\", {\n    value: `${options.price_option_three}-${options.ru_option_three}-${options.en_option_three}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, currLang ? `${options.ru_option_three}` : `${options.en_option_three}`))), __jsx(\"div\", {\n    className: \"product-description__information__control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"product-description__information__quantity\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    className: \"product-description__information__quantity__decrease\",\n    value: \"dec\",\n    onClick: handleQuantity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"Decrease\"), __jsx(\"p\", {\n    className: \"product-description__information__quantity__number\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, obj.quantity), __jsx(\"button\", {\n    className: \"product-description__information__quantity__increase\",\n    value: \"inc\",\n    onClick: handleQuantity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, \"Increase\")), __jsx(\"button\", {\n    className: \"product-description__information__add-item\",\n    onClick: () => {\n      addItem(obj);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, currLang ? ru.add : en.add)))));\n}\n\nPost.getInitialProps = async context => {\n  const {\n    id\n  } = context.query;\n  const res = await axios.get(`${process.env.CMSLINKSTORES}/${id}`);\n  const {\n    data\n  } = res;\n  return {\n    product: data\n  };\n};\n\nexport default Post;","map":{"version":3,"sources":["C:/Users/roger/OneDrive/Desktop/Dasha_Next/Dasha/pages/store/[id].js"],"names":["React","useState","useEffect","useContext","axios","LanguageContext","CartContext","ShoppingCartSlider","Post","product","sum","price","language","currLang","cart","addItem","setPrice","obj","setObj","productName","en","en_name","ru","ru_name","productParams","quantity","productPrice","productImage","image","url","russian","english","map","value","Number","prevState","removeParam","key","params","val","withoutParam","handleChange","e","name","target","parsedValues","split","newInput","handleQuantity","quantityKey","complekt","komplekt_description","i","id","additions","dopolneniye_description","product_params","options","select_name","price_option_one","ru_option_one","en_option_one","price_option_two","ru_option_two","en_option_two","price_option_three","ru_option_three","en_option_three","add","getInitialProps","context","query","res","get","process","env","CMSLINKSTORES","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { LanguageContext } from '../../contexts/LanguageContext';\r\nimport { CartContext } from '../../contexts/CartContext';\r\nimport ShoppingCartSlider from '../../components/ShoppingCartSlider';\r\n\r\nfunction Post({ product }) {\r\n\tlet sum = product.price;\r\n\tconst { language, currLang } = useContext(LanguageContext);\r\n\tconst { cart, addItem } = useContext(CartContext);\r\n\tconst [ price, setPrice ] = useState(product.price);\r\n\tconst [ obj, setObj ] = useState({\r\n\t\tproductName: {\r\n\t\t\ten: product.en_name,\r\n\t\t\tru: product.ru_name\r\n\t\t},\r\n\t\tproductParams: {},\r\n\t\tquantity: 1,\r\n\t\tproductPrice: price,\r\n\t\tproductImage: product.image[0].url\r\n\t});\r\n\tconst ru = language.russian.product;\r\n\tconst en = language.english.product;\r\n\t// Updates product price based on parameters that are selected\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tObject.values(obj.productParams).map((value) => {\r\n\t\t\t\tsum += Number(value.price);\r\n\t\t\t\tsetPrice(sum);\r\n\t\t\t});\r\n\r\n\t\t\tsetObj((prevState) => ({\r\n\t\t\t\t...prevState,\r\n\t\t\t\tproductPrice: sum\r\n\t\t\t}));\r\n\t\t},\r\n\t\t[ obj.productParams ]\r\n\t);\r\n\r\n\t// Updates state by using a copy of the rest of the object except the selected item\r\n\tconst removeParam = (key, params) => {\r\n\t\tconst { [key]: val, ...withoutParam } = params;\r\n\t\tsetObj((prevState) => ({\r\n\t\t\t...prevState,\r\n\t\t\tproductParams: withoutParam\r\n\t\t}));\r\n\t};\r\n\r\n\t// Handles parameters to be pushed to local object\r\n\tconst handleChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\r\n\t\t// grab both en and ru option and price\r\n\t\tconst parsedValues = value.split('-');\r\n\t\t// store appropriate one in en or ru or price\r\n\r\n\t\tconst price = parsedValues[0];\r\n\t\tconst ru = parsedValues[1];\r\n\t\tconst en = parsedValues[2];\r\n\r\n\t\t// store value in params\r\n\t\tlet newInput;\r\n\r\n\t\tnewInput = Object.assign({}, obj.productParams, { [name]: { en: en, ru: ru, price: price } });\r\n\t\tif (value === '0') {\r\n\t\t\tremoveParam(name, obj.productParams);\r\n\t\t} else {\r\n\t\t\tsetObj((prevState) => ({\r\n\t\t\t\t...prevState,\r\n\t\t\t\tproductParams: newInput\r\n\t\t\t}));\r\n\t\t}\r\n\t};\r\n\r\n\t// Quantity Function\r\n\tconst handleQuantity = (e) => {\r\n\t\tconst quantityKey = e.target.value;\r\n\t\tif (quantityKey === 'inc') {\r\n\t\t\tsetObj((prevState) => ({ ...prevState, quantity: obj.quantity + 1 }));\r\n\t\t} else {\r\n\t\t\tif (obj.quantity > 1) {\r\n\t\t\t\tsetObj((prevState) => ({ ...prevState, quantity: obj.quantity - 1 }));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"product-description\">\r\n\t\t\t{/* Picture Slider */}\r\n\t\t\t<ShoppingCartSlider product={product} />\r\n\r\n\t\t\t<div className=\"product-description__information\">\r\n\t\t\t\t{/* All text information on the [id] page */}\r\n\t\t\t\t<h1 className=\"product-description__information__title\">\r\n\t\t\t\t\t{currLang ? ` ${product.ru_name}` : ` ${product.en_name}`}\r\n\t\t\t\t\t{` - ${obj.productPrice} p.`}\r\n\t\t\t\t</h1>\r\n\t\t\t\t{/* Product Description */}\r\n\t\t\t\t<div className=\"product-description__information__description\">\r\n\t\t\t\t\t<div className=\"product-description__information__description__main-text\">\r\n\t\t\t\t\t\t<h2 className=\"product-description__information__description__main-text__title\">\r\n\t\t\t\t\t\t\t{currLang ? ru.complekt : en.complekt}:\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t{product.komplekt_description.map((e, i) => (\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\tkey={e.id}\r\n\t\t\t\t\t\t\t\tclassName=\"product-description__information__description__main-text__attributes\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t- {currLang ? e.russian : e.english}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"product-description__information__description__sub-text\">\r\n\t\t\t\t\t\t<h2 className=\"product-description__information__description__sub-text__title\">\r\n\t\t\t\t\t\t\t{currLang ? ru.additions : en.additions}:\r\n\t\t\t\t\t\t</h2>\r\n\r\n\t\t\t\t\t\t{product.dopolneniye_description.map((e, i) => (\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\tkey={e.id}\r\n\t\t\t\t\t\t\t\tclassName=\"product-description__information__description__sub-text__attributes\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t- {currLang ? e.russian : e.english}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Parameters + Add to Cart */}\r\n\t\t\t\t<div className=\"product-description__information__selectors\">\r\n\t\t\t\t\t{product.product_params.map((options, i) => (\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"product-description__information__selection\"\r\n\t\t\t\t\t\t\tname={`parameter-${i + 1}`}\r\n\t\t\t\t\t\t\tkey={options.id}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option label={options.select_name} value={'0'} />\r\n\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\tvalue={`${options.price_option_one}-${options.ru_option_one}-${options.en_option_one}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{currLang ? `${options.ru_option_one}` : `${options.en_option_one}`}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\tvalue={`${options.price_option_two}-${options.ru_option_two}-${options.en_option_two}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{currLang ? `${options.ru_option_two}` : `${options.en_option_two}`}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\tvalue={`${options.price_option_three}-${options.ru_option_three}-${options.en_option_three}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{currLang ? `${options.ru_option_three}` : `${options.en_option_three}`}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t<div className=\"product-description__information__control\">\r\n\t\t\t\t\t\t<div className=\"product-description__information__quantity\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"product-description__information__quantity__decrease\"\r\n\t\t\t\t\t\t\t\tvalue=\"dec\"\r\n\t\t\t\t\t\t\t\tonClick={handleQuantity}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tDecrease\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<p className=\"product-description__information__quantity__number\">{obj.quantity}</p>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"product-description__information__quantity__increase\"\r\n\t\t\t\t\t\t\t\tvalue=\"inc\"\r\n\t\t\t\t\t\t\t\tonClick={handleQuantity}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tIncrease\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"product-description__information__add-item\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\taddItem(obj);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{currLang ? ru.add : en.add}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nPost.getInitialProps = async (context) => {\r\n\tconst { id } = context.query;\r\n\tconst res = await axios.get(`${process.env.CMSLINKSTORES}/${id}`);\r\n\r\n\tconst { data } = res;\r\n\treturn { product: data };\r\n};\r\n\r\nexport default Post;\r\n"]},"metadata":{},"sourceType":"module"}